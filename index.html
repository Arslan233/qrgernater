<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google Ads (kept) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6123410178595757"
     crossorigin="anonymous"></script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- ====== PRIMARY SEO ====== -->
  <title>Free QR Code Generator & QR Scanner Online ‚Äî QRGernater</title>
  <meta name="description" content="QRGernater ‚Äî Free QR code generator and online scanner. Create custom QR codes (URL, Wi-Fi, vCard, email, SMS) and scan QR codes using camera or image upload. No signup, instant download, logo support." />
  <meta name="keywords" content="free qr code generator, qr code scanner online, qr code generator with logo, create qr code, scan qr code online, wifi qr code, vcard qr code" />
  <meta name="robots" content="index, follow" />
  <meta name="author" content="QRGernater" />
  <meta name="theme-color" content="#0f172a" />

  <!-- Canonical / Domain -->
  <link rel="canonical" href="http://qrgernater.online/" />

  <!-- Sitemap (helps crawlers find pages) -->
  <link rel="sitemap" type="application/xml" title="Sitemap" href="http://qrgernater.online/sitemap.xml" />

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üî≥</text></svg>">

  <!-- Open Graph / Social -->
  <meta property="og:title" content="Free QR Code Generator & QR Scanner Online ‚Äî QRGernater" />
  <meta property="og:description" content="Create and scan QR codes instantly with QRGernater ‚Äî free QR code maker (URL, Wi-Fi, vCard, email, SMS) and online scanner using camera or image upload. No signup." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="http://qrgernater.online/" />
  <meta property="og:image" content="http://qrgernater.online/og-image.jpg" />
  <meta property="og:site_name" content="QRGernater" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Free QR Code Generator & QR Scanner Online ‚Äî QRGernater" />
  <meta name="twitter:description" content="Create and scan QR codes instantly with QRGernater ‚Äî free, no signup, logo support, Wi-Fi and vCard QR codes." />
  <meta name="twitter:image" content="http://qrgernater.online/og-image.jpg" />
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NHKQ86VRJ9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NHKQ86VRJ9');
</script>

  <!-- JSON-LD (structured data) updated to your domain -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebApplication",
        "name": "QRGernater - Free QR Code Generator & Scanner",
        "applicationCategory": "UtilitiesApplication",
        "operatingSystem": "All",
        "description": "QRGernater is a free online QR code generator and scanner to create and read QR codes for URLs, text, WiFi, vCard, email, and SMS. No sign-up required.",
        "url": "http://qrgernater.online/",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        },
        "author": {
          "@type": "Organization",
          "name": "QRGernater"
        }
      },
      {
        "@type": "WebSite",
        "name": "QRGernater",
        "url": "http://qrgernater.online/",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "http://qrgernater.online/?q={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      },
      {
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "Is QRGernater free to use?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes ‚Äî QRGernater is free with no hidden fees or watermarks."
            }
          },
          {
            "@type": "Question",
            "name": "Can I scan QR codes using my camera?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes ‚Äî the online scanner supports camera scanning and image uploads."
            }
          },
          {
            "@type": "Question",
            "name": "What types of QR codes can I create?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "URL, plain text, WiFi, vCard, email, and SMS QR codes."
            }
          }
        ]
      }
    ]
  }
  </script>

  <!-- External libs (kept) -->
  <script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js" defer></script>

  <!-- Styles (unchanged) -->
  <style>
    /* ===== ENHANCED DESIGN SYSTEM ===== */
    :root {
      --bg: #0f172a;
      --panel: #1e293b;
      --muted: #94a3b8;
      --text: #f1f5f9;
      --accent: #3b82f6;
      --accent-hover: #2563eb;
      --card: #1a243d;
      --border: #334155;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
      --gradient: linear-gradient(135deg, #3b82f6, #1d4ed8);
      --success: #10b981;
      --warning: #f59e0b;
      --error: #ef4444;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { margin: 0; background: var(--bg); color: var(--text); font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif; line-height: 1.6; overflow-x: hidden; }
    a { color: var(--accent); text-decoration: none; transition: color 0.2s ease; }
    a:hover { color: var(--accent-hover); text-decoration: underline; }
    h1,h2,h3{ line-height:1.2; font-weight:700; }
    header { position: sticky; top:0; background: rgba(15,23,42,0.95); backdrop-filter: blur(10px); border-bottom:1px solid var(--border); z-index:1000; }
    .nav { max-width:1200px; margin:auto; padding:16px 24px; display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; }
    .brand { display:flex; align-items:center; gap:12px; font-weight:800; font-size:1.5rem; }
    .logo { width:42px; height:42px; border-radius:12px; background:var(--gradient); display:grid; place-items:center; color:white; font-weight:900; box-shadow:var(--shadow); }
    .menu { display:flex; gap:24px; flex-wrap:wrap; }
    .menu a { color:var(--muted); font-weight:600; padding:8px 0; position:relative; }
    .menu a:hover { color:#fff; }
    .menu a::after { content:''; position:absolute; bottom:0; left:0; width:0; height:2px; background:var(--accent); transition:width 0.3s ease; }
    .menu a:hover::after { width:100%; }
    .hero { max-width:1200px; margin:0 auto; padding:60px 24px 40px; text-align:center; }
    .hero h1 { font-size:3.5rem; margin-bottom:20px; background:var(--gradient); -webkit-background-clip:text; background-clip:text; color:transparent; display:inline-block; }
    .hero p { font-size:1.3rem; max-width:700px; margin:0 auto 30px; color:var(--muted); }
    .features { display:flex; justify-content:center; gap:30px; flex-wrap:wrap; margin-top:40px; }
    .feature { display:flex; align-items:center; gap:10px; color:var(--muted); font-weight:500; }
    .feature-icon { width:24px; height:24px; background:var(--gradient); border-radius:6px; display:flex; align-items:center; justify-content:center; font-size:14px; }
    .grid { display:grid; grid-template-columns:1fr 1fr; gap:30px; max-width:1200px; margin:0 auto; padding:0 24px; }
    @media (max-width:900px) { .grid { grid-template-columns:1fr; } }
    .card { background:var(--card); border:1px solid var(--border); border-radius:20px; box-shadow:var(--shadow); padding:30px; transition:transform 0.3s ease, box-shadow 0.3s ease; margin-bottom:30px; }
    .card:hover { transform:translateY(-5px); box-shadow:0 15px 40px rgba(0,0,0,0.35); }
    .card h2 { margin-bottom:20px; font-size:1.8rem; display:flex; align-items:center; gap:10px; }
    .card h2::before { content:''; width:8px; height:24px; background:var(--accent); border-radius:4px; }
    label { display:block; margin:16px 0 8px; font-size:15px; color:#b8d4ee; font-weight:500; }
    input, select, textarea { width:100%; padding:16px 18px; border-radius:12px; border:1px solid var(--border); background:#0f1729; color:var(--text); font-size:16px; transition:border-color 0.2s ease, box-shadow 0.2s ease; }
    input:focus, select:focus, textarea:focus { outline:none; border-color:var(--accent); box-shadow:0 0 0 3px rgba(59,130,246,0.1); }
    input::placeholder, textarea::placeholder { color:#6f879e; }
    .actions { display:flex; flex-wrap:wrap; gap:12px; margin-top:20px; }
    .btn { background:var(--gradient); color:white; border:none; border-radius:12px; padding:16px 20px; font-weight:700; cursor:pointer; transition:all 0.2s ease; flex:1; min-width:140px; display:flex; align-items:center; justify-content:center; gap:8px; }
    .btn:hover { opacity:0.95; box-shadow:0 4px 12px rgba(59,130,246,0.4); transform:translateY(-2px); }
    .btn.secondary { background:var(--panel); color:var(--text); border:1px solid var(--border); }
    .btn:disabled { opacity:0.5; cursor:not-allowed; transform:none; box-shadow:none; }
    .qr-output { display:flex; justify-content:center; align-items:center; background:#0a1423; border:2px dashed var(--border); border-radius:20px; min-height:280px; padding:30px; margin-top:20px; transition:border-color 0.3s ease; }
    .qr-output.has-code { border-color:var(--accent); border-style:solid; }
    .qr-output .muted { color:var(--muted); text-align:center; }
    .row { display:flex; gap:12px; margin-bottom:16px; }
    .dropzone { border:2px dashed var(--border); border-radius:16px; padding:30px; text-align:center; color:var(--muted); background:#0a1423; cursor:pointer; transition:all 0.3s ease; margin-top:16px; }
    .dropzone:hover, .dropzone.drag { border-color:var(--accent); color:#bffff4; background:#0d1a2a; }
    .result { background:#0a1423; border:1px solid var(--border); border-radius:12px; padding:16px; margin-top:16px; word-break:break-word; }
    .result-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; }
    .content-section { max-width:1200px; margin:0 auto; padding:0 24px; }
    .section-title { font-size:2.2rem; margin-bottom:30px; text-align:center; background:var(--gradient); -webkit-background-clip:text; background-clip:text; color:transparent; }
    .info-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:24px; margin-top:40px; }
    .info-card { background:var(--card); border-radius:16px; padding:24px; border:1px solid var(--border); }
    .info-card h3 { margin-bottom:12px; display:flex; align-items:center; gap:10px; }
    .info-card p { color:var(--muted); }
    .footer { margin-top:60px; border-top:1px solid var(--border); background:var(--panel); }
    .footer-inner { max-width:1200px; margin:auto; padding:40px 24px; display:grid; grid-template-columns:2fr 1fr 1fr; gap:40px; }
    @media (max-width:768px) { .footer-inner { grid-template-columns:1fr; gap:30px; } .nav{flex-direction:column;} .menu{gap:16px;} .hero h1{font-size:2.5rem;} .hero p{font-size:1.1rem;} .features{flex-direction:column; align-items:center;} .card{padding:20px;} .btn{min-width:100%;} }
  </style>
</head>
<body>
  <!-- IMPROVED HEADER -->
  <header>
    <div class="nav">
      <div class="brand">
        <div class="logo" role="img" aria-label="QRGernater Logo">QR</div>
        <div>QRGernater</div>
      </div>
      <nav class="menu" aria-label="Main navigation">
        <a href="#generator">Free QR Code Generator</a>
        <a href="#scanner">QR Code Scanner Online</a>
        <a href="#about">About</a>
        <a href="#uses">Uses</a>
        <a href="#contact">Contact</a>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <div class="hero">
    <h1>Free QR Code Generator & Online Scanner</h1>
    <p>Create custom <strong>QR codes</strong> for links, text, Wi-Fi, email, SMS, and vCard using QRGernater. Scan QR codes for free online via camera or image upload. No signup required.</p>

    <div class="features" aria-hidden="true">
      <div class="feature">
        <div class="feature-icon">‚úì</div>
        <span>No Registration Required</span>
      </div>
      <div class="feature">
        <div class="feature-icon">‚úì</div>
        <span>Works on All Devices</span>
      </div>
      <div class="feature">
        <div class="feature-icon">‚úì</div>
        <span>Instant Download</span>
      </div>
    </div>
  </div>

  <!-- MAIN GRID -->
  <div class="grid">
    <!-- QR GENERATOR -->
    <section id="generator" class="card">
      <h2>Free QR Code Generator</h2>
      <p>Use QRGernater to create free QR codes online without any sign-up.</p>
      <label for="type">QR Code Type</label>
      <select id="type" aria-controls="qrwrap">
        <option value="url">URL / Link</option>
        <option value="text">Text</option>
        <option value="wifi">Wi-Fi</option>
        <option value="email">Email</option>
        <option value="sms">SMS</option>
        <option value="vcard">vCard</option>
      </select>

      <div id="form-url" class="form">
        <label for="url">Website URL</label>
        <input id="url" type="url" placeholder="https://example.com" />
      </div>

      <div id="form-text" class="form" style="display:none">
        <label for="text">Text Content</label>
        <textarea id="text" rows="3" placeholder="Enter any text"></textarea>
      </div>

      <div id="form-wifi" class="form" style="display:none">
        <label for="ssid">WiFi Network Name (SSID)</label>
        <input id="ssid" placeholder="Your WiFi name">
        <label for="wifipass">Password</label>
        <input id="wifipass" placeholder="WiFi password">
        <label for="encryption">Encryption Type</label>
        <select id="encryption">
          <option value="WPA">WPA/WPA2</option>
          <option value="WEP">WEP</option>
          <option value="nopass">No Password</option>
        </select>
      </div>

      <div id="form-email" class="form" style="display:none">
        <label for="email">Email Address</label>
        <input id="email" type="email" placeholder="you@example.com">
        <label for="subject">Subject</label>
        <input id="subject" placeholder="Email subject">
        <label for="body">Message</label>
        <textarea id="body" rows="3" placeholder="Email message"></textarea>
      </div>

      <div id="form-sms" class="form" style="display:none">
        <label for="phone">Phone Number</label>
        <input id="phone" placeholder="+1234567890">
        <label for="smsmsg">Message</label>
        <textarea id="smsmsg" rows="2" placeholder="SMS text message"></textarea>
      </div>

      <div id="form-vcard" class="form" style="display:none">
        <label for="vname">Full Name</label>
        <input id="vname" placeholder="John Doe">
        <label for="vphone">Phone Number</label>
        <input id="vphone" placeholder="+1234567890">
        <label for="vemail">Email Address</label>
        <input id="vemail" type="email" placeholder="you@example.com">
        <label for="vcompany">Company</label>
        <input id="vcompany" placeholder="Company Inc.">
      </div>

      <div class="actions">
        <button id="gen" class="btn">Generate QR Code</button>
        <button id="download" class="btn secondary" disabled>Download PNG</button>
        <button id="download-svg" class="btn secondary" disabled>Download SVG</button>
        <button id="copy-payload" class="btn secondary" disabled>Copy Content</button>
      </div>
      <div id="qrwrap" class="qr-output" aria-live="polite">
        <div class="muted">Your QR code will appear here</div>
      </div>
    </section>

    <!-- QR SCANNER -->
    <section id="scanner" class="card">
      <h2>QR Code Scanner Online</h2>
      <p>Scan QR codes for free using your camera or by uploading an image.</p>
      <div class="row">
        <button id="startCam" class="btn">Start Camera Scan</button>
        <button id="stopCam" class="btn secondary" disabled>Stop Camera</button>
      </div>
      <video id="video" playsinline style="width:100%; border-radius:12px; margin-top:10px; display:none;"></video>
      <div class="dropzone" id="drop" role="button" tabindex="0">
        <div style="margin-bottom: 10px;">üìÅ</div>
        <div>Click or drag image to scan QR code</div>
        <input id="file" type="file" accept="image/*" style="display:none">
      </div>
      <canvas id="hiddenCanvas" style="display:none"></canvas>
      <div id="scanResult" class="result" style="display:none">
        <div class="result-header">
          <strong>Scan Result</strong>
          <button id="copyScan" class="btn secondary" style="padding: 8px 12px; min-width: auto;">Copy</button>
        </div>
        <div id="scanText" style="margin-top:8px"></div>
      </div>
    </section>
  </div>

  <!-- ABOUT / USES / FAQ (unchanged content but domain mentions updated) -->
  <div class="content-section">
    <section id="about" class="card">
      <h2 class="section-title">About QRGernater - Free QR Code Generator and Online Scanner</h2>
      <p>QRGernater is a modern, free QR code generator and online scanner tool designed to make creating and scanning QR codes simple and efficient. Create QR codes for business or personal use without any cost or registration.</p>
      <div class="info-grid">
        <div class="info-card">
          <h3>üîí Privacy Focused</h3>
          <p>Generation and scanning happen locally in your browser ‚Äî we don't store your data.</p>
        </div>
        <div class="info-card">
          <h3>üöÄ Instant Results</h3>
          <p>Generate and scan QR codes instantly with our lightweight in-browser tools.</p>
        </div>
        <div class="info-card">
          <h3>üì± Mobile Optimized</h3>
          <p>Works across smartphones, tablets and desktops for a consistent experience.</p>
        </div>
      </div>
    </section>

    <section id="uses" class="card">
      <h2 class="section-title">What Can You Do With QR Codes?</h2>
      <p>Use QRGernater to create QR codes for links, contact sharing (vCard), Wi-Fi access, email, SMS, and more.</p>

      <div class="info-grid">
        <div class="info-card">
          <h3>üîó Share Links</h3>
          <p>Create QR codes for websites and social profiles for quick sharing.</p>
        </div>
        <div class="info-card">
          <h3>üìû vCard Contact Sharing</h3>
          <p>Generate vCard QR codes for fast contact sharing at events or on business cards.</p>
        </div>
        <div class="info-card">
          <h3>üì∂ Wi-Fi Access</h3>
          <p>Give guests Wi-Fi access without typing passwords by creating Wi-Fi QR codes.</p>
        </div>
      </div>
    </section>

    <section id="contact" class="card">
      <h2 class="section-title">Contact Us</h2>
      <p>For feedback or support, email: <a href="mailto:support@qrgernater.online">support@qrgernater.online</a></p>
    </section>

    <section id="faq" class="card">
      <h2 class="section-title">Frequently Asked Questions</h2>
      <div class="info-grid">
        <div class="info-card">
          <h3>How to create a free QR code?</h3>
          <p>Select the QR type, fill details and click "Generate QR Code".</p>
        </div>
        <div class="info-card">
          <h3>How to scan QR code online?</h3>
          <p>Use camera scanning or upload an image to scan instantly.</p>
        </div>
        <div class="info-card">
          <h3>Do I need an app?</h3>
          <p>No ‚Äî QRGernater is browser-based and works without downloads.</p>
        </div>
      </div>
    </section>
  </div>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="footer-inner">
      <div>
        <div class="footer-logo">
          <div class="logo" style="width:32px; height:32px; font-size:14px;" aria-label="QRGernater Logo">QR</div>
          <div>QRGernater</div>
        </div>
        <p class="footer-desc">Free online QR code generator and scanner. Create and scan QR codes instantly with no registration required.</p>
      </div>
      <div class="footer-links">
        <h4>Tools</h4>
        <a href="#generator">Free QR Code Generator</a>
        <a href="#scanner">QR Code Scanner Online</a>
        <a href="#uses">QR Code Uses</a>
      </div>
      <div class="footer-links">
        <h4>Company</h4>
        <a href="#about">About Us</a>
        <a href="#contact">Contact</a>
        <a href="/privacy">Privacy Policy</a>
        <a href="/terms">Terms of Service</a>
      </div>
    </div>
    <div class="legal">
      ¬© 2025 QRGernater ‚Äì Free QR Code Generator & Online Scanner. All rights reserved.
    </div>
  </footer>

  <!-- Sounds -->
  <audio id="soundSuccess" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg" preload="auto"></audio>
  <audio id="soundError" src="https://actions.google.com/sounds/v1/cartoon/metal_clang_and_squeak.ogg" preload="auto"></audio>
  <audio id="soundBeep" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg" preload="auto"></audio>

  <!-- MAIN JS: generator + scanner logic (kept but slightly deferred for libs) -->
  <script>
    // QR generator & scanner JS (exact same logic as before) ‚Äî kept intact, only minimal improvements for UX/accessibility
    const $ = (q) => document.querySelector(q);
    const typeSel = $('#type');
    const forms = {
      url: $('#form-url'), text: $('#form-text'), wifi: $('#form-wifi'),
      email: $('#form-email'), sms: $('#form-sms'), vcard: $('#form-vcard')
    };

    function showForm(name) {
      Object.values(forms).forEach(el => el.style.display = 'none');
      forms[name].style.display = '';
    }

    typeSel.addEventListener('change', e => showForm(e.target.value));
    showForm(typeSel.value);

    const genBtn = $('#gen'),
          dlBtn = $('#download'),
          dlSvgBtn = $('#download-svg'),
          copyPayloadBtn = $('#copy-payload'),
          qrWrap = $('#qrwrap');

    let currentPayload = "", qrCodeInstance = null;

    const soundSuccess = $('#soundSuccess'),
          soundError = $('#soundError'),
          soundBeep = $('#soundBeep');

    function playSuccess(){ try{ soundSuccess.currentTime = 0; soundSuccess.play(); }catch(e){} }
    function playError(){ try{ soundError.currentTime = 0; soundError.play(); }catch(e){} }
    function playBeep(){ try{ soundBeep.currentTime = 0; soundBeep.play(); }catch(e){} }

    function buildPayload() {
      const t = typeSel.value;
      if (t === 'url') {
        let u = $('#url').value.trim();
        if (!u) { playError(); throw "Please enter a URL"; }
        return u.startsWith('http') ? u : "https://" + u;
      }
      if (t === 'text') {
        let txt = $('#text').value.trim();
        if (!txt) { playError(); throw "Please enter some text"; }
        return txt;
      }
      if (t === 'wifi') {
        let ssid = $('#ssid').value,
            pass = $('#wifipass').value,
            enc = $('#encryption').value;
        if (!ssid) { playError(); throw "Please enter WiFi network name"; }
        return `WIFI:T:${enc};S:${ssid};P:${pass};;`;
      }
      if (t === 'email') {
        let to = $('#email').value,
            sub = $('#subject').value,
            body = $('#body').value;
        if (!to) { playError(); throw "Please enter an email address"; }
        return `mailto:${to}?subject=${encodeURIComponent(sub)}&body=${encodeURIComponent(body)}`;
      }
      if (t === 'sms') {
        let ph = $('#phone').value, msg = $('#smsmsg').value;
        if (!ph) { playError(); throw "Please enter a phone number"; }
        return `SMSTO:${ph}:${msg}`;
      }
      if (t === 'vcard') {
        let n = $('#vname').value, ph = $('#vphone').value, em = $('#vemail').value, co = $('#vcompany').value;
        if (!n) { playError(); throw "Please enter a name"; }
        return `BEGIN:VCARD\nVERSION:3.0\nN:${n}\nTEL:${ph}\nEMAIL:${em}\nORG:${co}\nEND:VCARD`;
      }
    }

    genBtn.addEventListener('click', () => {
      try {
        const payload = buildPayload();
        currentPayload = payload;
        qrWrap.innerHTML = '';
        qrCodeInstance = new QRCode(qrWrap, {
          text: payload,
          width: 256,
          height: 256,
          colorDark: "#1e293b",
          colorLight: "#f1f5f9"
        });

        dlBtn.disabled = false;
        dlSvgBtn.disabled = false;
        copyPayloadBtn.disabled = false;
        qrWrap.classList.add('has-code');
        playSuccess();
      } catch (err) {
        alert(err);
      }
    });

    dlBtn.addEventListener('click', () => {
      let canvas = qrWrap.querySelector('canvas');
      if (!canvas) return;
      const link = document.createElement('a');
      link.download = "qrgenerate.png";
      link.href = canvas.toDataURL();
      link.click();
    });

    dlSvgBtn.addEventListener('click', () => {
      if (!qrCodeInstance) return;
      let svg = document.querySelector('#qrwrap svg');
      if (!svg) return;
      const data = new XMLSerializer().serializeToString(svg);
      const blob = new Blob([data], { type: 'image/svg+xml' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = "qrgenerate.svg";
      link.click();
    });

    copyPayloadBtn.addEventListener('click', () => {
      navigator.clipboard.writeText(currentPayload).then(() => {
        playBeep();
        alert("QR code content copied to clipboard!");
      });
    });

    // Scanner code
    const startCam = $('#startCam'), stopCam = $('#stopCam'), video = $('#video'), hiddenCanvas = $('#hiddenCanvas'), scanResult = $('#scanResult'), scanText = $('#scanText'), copyScan = $('#copyScan');
    let camStream = null, scanInterval = null;

    startCam.addEventListener('click', async () => {
      try {
        camStream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } });
        video.srcObject = camStream;
        video.style.display = "block";
        video.play();
        startCam.disabled = true;
        stopCam.disabled = false;
        scanInterval = setInterval(() => {
          if (video.readyState === video.HAVE_ENOUGH_DATA) {
            hiddenCanvas.width = video.videoWidth;
            hiddenCanvas.height = video.videoHeight;
            const ctx = hiddenCanvas.getContext("2d");
            ctx.drawImage(video, 0, 0, hiddenCanvas.width, hiddenCanvas.height);
            const img = ctx.getImageData(0, 0, hiddenCanvas.width, hiddenCanvas.height);
            const code = jsQR(img.data, img.width, img.height);
            if (code) {
              showResult(code.data);
              stopCamera();
            }
          }
        }, 300);
      } catch (e) {
        alert("Camera error: " + e);
      }
    });

    function stopCamera() {
      if (camStream) {
        camStream.getTracks().forEach(t => t.stop());
        camStream = null;
      }
      if (scanInterval) clearInterval(scanInterval);
      startCam.disabled = false;
      stopCam.disabled = true;
      video.style.display = "none";
    }

    stopCam.addEventListener('click', stopCamera);

    function showResult(txt) {
      scanText.textContent = txt;
      scanResult.style.display = "block";
      playSuccess();
    }

    copyScan.addEventListener('click', () => {
      navigator.clipboard.writeText(scanText.textContent).then(() => {
        playBeep();
        alert("Scan result copied to clipboard!");
      });
    });

    // Drag & Drop
    const drop = $('#drop'), fileInput = $('#file');
    drop.addEventListener('click', () => fileInput.click());
    drop.addEventListener('dragover', e => { e.preventDefault(); drop.classList.add('drag'); });
    drop.addEventListener('dragleave', () => drop.classList.remove('drag'));
    drop.addEventListener('drop', e => { e.preventDefault(); drop.classList.remove('drag'); handleFiles(e.dataTransfer.files); });
    fileInput.addEventListener('change', () => handleFiles(fileInput.files));

    function handleFiles(files) {
      if (!files.length) return;
      const file = files[0];
      const reader = new FileReader();
      reader.onload = () => {
        const img = new Image();
        img.onload = () => {
          hiddenCanvas.width = img.width;
          hiddenCanvas.height = img.height;
          const ctx = hiddenCanvas.getContext("2d");
          ctx.drawImage(img, 0, 0);
          const imageData = ctx.getImageData(0, 0, img.width, img.height);
          const code = jsQR(imageData.data, imageData.width, imageData.height);
          if (code) {
            showResult(code.data);
          } else {
            playError();
            alert("No QR code found in this image. Please try another image.");
          }
        };
        img.src = reader.result;
      };
      reader.readAsDataURL(file);
    }
  </script>
</body>
</html>
